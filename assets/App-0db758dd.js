import{r as s,u as B,M as V,s as Ye,j as i,C as Ze,S as Ee,U as Xe,a as Se,B as et,R as F,e as tt,b as nt,c as ee,L as le,d as rt,E as ae,f as ce,i as H,G as ne,g as Ne,h as ge,k as st,l as it,V as ue,m as ot,n as K,o as lt,p as at,O as ct}from"./index-601b71ff.js";import"//cdn.skypack.dev/three@0.130.1/build/three.module.js";function ut(){const e=s.useRef(),t=B(u=>u.wiringStep);let{currentStepObject:r,setCurrentSVG:o}=s.useContext(V);return s.useEffect(()=>{t&&document.getElementById("myEmbed").addEventListener("load",function(){o(Ye(document.getElementById("myEmbed")))})},[t]),i.jsx(i.Fragment,{children:t?i.jsx("div",{id:"svgContainer",style:{position:"absolute",width:"100%",height:"100%",bottom:"0px",left:"0px",padding:"10px"},children:i.jsx("embed",{style:{width:"100%",height:"100%",backgroundColor:"#e9e9e9"},ref:e,type:"image/svg+xml",src:`./${r.name}.svg`,id:"myEmbed"})}):null})}function dt(){let{setStepPosition:e,stepCount:t}=s.useContext(V);const r=()=>{t++,e(t)},o=()=>{t--,e(t)};return i.jsxs(i.Fragment,{children:[t>=1?i.jsx("button",{onClick:o,className:"btn",id:"nextStep",children:" ❮ Previous Step  "}):null,i.jsx("button",{onClick:r,className:"btn",id:"nextStep",children:"Next Step ❯ "})]})}function ft(){const{setModelInOut:e,selectedParts:t}=s.useContext(V),[r,o]=s.useState(!1),u=B(b=>b.wiringStep),f=()=>{r==!1?(document.getElementById("partsOut").innerHTML="Assemble",o(!0),e(r)):r==!0&&(document.getElementById("partsOut").innerHTML="Explode",o(!1),e(r))};return i.jsx(i.Fragment,{children:u?null:i.jsx("button",{onClick:f,className:"btn",id:"partsOut",children:"Explode"})})}class pt{constructor(t,r={}){this.enabled=!0;const o=r.defaultThickness!==void 0?r.defaultThickness:.003,u=new Ze().fromArray(r.defaultColor!==void 0?r.defaultColor:[0,0,0]),f=r.defaultAlpha!==void 0?r.defaultAlpha:1,b=r.defaultKeepAlive!==void 0?r.defaultKeepAlive:!1,m={},p=60,v={},d={},O={outlineThickness:{value:o},outlineColor:{value:u},outlineAlpha:{value:f}},E=["#include <common>","#include <uv_pars_vertex>","#include <displacementmap_pars_vertex>","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>","uniform float outlineThickness;","vec4 calculateOutline( vec4 pos, vec3 normal, vec4 skinned ) {","	float thickness = outlineThickness;","	const float ratio = 1.0;","	vec4 pos2 = projectionMatrix * modelViewMatrix * vec4( skinned.xyz + normal, 1.0 );","	vec4 norm = normalize( pos - pos2 );","	return pos + norm * thickness * pos.w * ratio;","}","void main() {","	#include <uv_vertex>","	#include <beginnormal_vertex>","	#include <morphnormal_vertex>","	#include <skinbase_vertex>","	#include <skinnormal_vertex>","	#include <begin_vertex>","	#include <morphtarget_vertex>","	#include <skinning_vertex>","	#include <displacementmap_vertex>","	#include <project_vertex>","	vec3 outlineNormal = - objectNormal;","	gl_Position = calculateOutline( gl_Position, outlineNormal, vec4( transformed, 1.0 ) );","	#include <logdepthbuf_vertex>","	#include <clipping_planes_vertex>","	#include <fog_vertex>","}"].join(`
`),x=["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <clipping_planes_pars_fragment>","uniform vec3 outlineColor;","uniform float outlineAlpha;","void main() {","	#include <clipping_planes_fragment>","	#include <logdepthbuf_fragment>","	gl_FragColor = vec4( outlineColor, outlineAlpha );","	#include <tonemapping_fragment>","	#include <encodings_fragment>","	#include <fog_fragment>","	#include <premultiplied_alpha_fragment>","}"].join(`
`);function _(){return new Ee({type:"OutlineEffect",uniforms:Xe.merge([Se.fog,Se.displacementmap,O]),vertexShader:E,fragmentShader:x,side:et})}function N(n){let l=m[n.uuid];return l===void 0&&(l={material:_(),used:!0,keepAlive:b,count:0},m[n.uuid]=l),l.used=!0,l.material}function P(n){const l=N(n);return v[l.uuid]=n,z(l,n),l}function k(n){const l=n.geometry;let a=!1;return n.geometry!==void 0&&(l.isBufferGeometry?a=l.attributes.normal!==void 0:a=!0),n.isMesh===!0&&n.material!==void 0&&a===!0}function A(n){if(k(n)!==!1){if(Array.isArray(n.material))for(let l=0,a=n.material.length;l<a;l++)n.material[l]=P(n.material[l]);else n.material=P(n.material);d[n.uuid]=n.onBeforeRender,n.onBeforeRender=h}}function T(n){if(k(n)!==!1){if(Array.isArray(n.material))for(let l=0,a=n.material.length;l<a;l++)n.material[l]=v[n.material[l].uuid];else n.material=v[n.material.uuid];n.onBeforeRender=d[n.uuid]}}function h(n,l,a,y,S){const I=v[S.uuid];I!==void 0&&M(S,I)}function M(n,l){const a=l.userData.outlineParameters;n.uniforms.outlineAlpha.value=l.opacity,a!==void 0&&(a.thickness!==void 0&&(n.uniforms.outlineThickness.value=a.thickness),a.color!==void 0&&n.uniforms.outlineColor.value.fromArray(a.color),a.alpha!==void 0&&(n.uniforms.outlineAlpha.value=a.alpha)),l.displacementMap&&(n.uniforms.displacementMap.value=l.displacementMap,n.uniforms.displacementScale.value=l.displacementScale,n.uniforms.displacementBias.value=l.displacementBias)}function z(n,l){if(n.name==="invisible")return;const a=l.userData.outlineParameters;n.fog=l.fog,n.toneMapped=l.toneMapped,n.premultipliedAlpha=l.premultipliedAlpha,n.displacementMap=l.displacementMap,a!==void 0?(l.visible===!1?n.visible=!1:n.visible=a.visible!==void 0?a.visible:!0,n.transparent=a.alpha!==void 0&&a.alpha<1?!0:l.transparent,a.keepAlive!==void 0&&(m[l.uuid].keepAlive=a.keepAlive)):(n.transparent=l.transparent,n.visible=l.visible),(l.wireframe===!0||l.depthTest===!1)&&(n.visible=!1),l.clippingPlanes&&(n.clipping=!0,n.clippingPlanes=l.clippingPlanes,n.clipIntersection=l.clipIntersection,n.clipShadows=l.clipShadows),n.version=l.version}function D(){let n;n=Object.keys(v);for(let l=0,a=n.length;l<a;l++)v[n[l]]=void 0;n=Object.keys(d);for(let l=0,a=n.length;l<a;l++)d[n[l]]=void 0;n=Object.keys(m);for(let l=0,a=n.length;l<a;l++){const y=n[l];m[y].used===!1?(m[y].count++,m[y].keepAlive===!1&&m[y].count>p&&delete m[y]):(m[y].used=!1,m[y].count=0)}}this.render=function(n,l){if(this.enabled===!1){t.render(n,l);return}const a=t.autoClear;t.autoClear=this.autoClear,t.render(n,l),t.autoClear=a,this.renderOutline(n,l)},this.renderOutline=function(n,l){const a=t.autoClear,y=n.matrixWorldAutoUpdate,S=n.background,I=t.shadowMap.enabled;n.matrixWorldAutoUpdate=!1,n.background=null,t.autoClear=!1,t.shadowMap.enabled=!1,n.traverse(A),t.render(n,l),n.traverse(T),D(),n.matrixWorldAutoUpdate=y,n.background=S,t.autoClear=a,t.shadowMap.enabled=I},this.autoClear=t.autoClear,this.domElement=t.domElement,this.shadowMap=t.shadowMap,this.clear=function(n,l,a){t.clear(n,l,a)},this.getPixelRatio=function(){return t.getPixelRatio()},this.setPixelRatio=function(n){t.setPixelRatio(n)},this.getSize=function(n){return t.getSize(n)},this.setSize=function(n,l,a){t.setSize(n,l,a)},this.setViewport=function(n,l,a,y){t.setViewport(n,l,a,y)},this.setScissor=function(n,l,a,y){t.setScissor(n,l,a,y)},this.setScissorTest=function(n){t.setScissorTest(n)},this.setRenderTarget=function(n){t.setRenderTarget(n)}}}const ht=s.createContext(null);function mt(e){let{children:t,enabled:r=!0}=e;const[o,u]=s.useState([]),f=s.useMemo(()=>({selected:o,select:u,enabled:r}),[o,u,r]);return F.createElement(ht.Provider,{value:f},t)}tt({OutlineEffect:pt});const de=[],fe=[];function gt({modelIn:e,modelOut:t,modelInCopy:r,modelInCopy2:o,modelOutCopy:u}){console.log("render count");const{gl:f,camera:b,scene:m}=nt(),p=s.useRef(),v=s.useRef();s.useRef(),s.useRef(),s.useRef(),f.setPixelRatio(Math.min(window.devicePixelRatio,2));let{stepCount:d,modelProperties:O,partsInOut:E,setVisibleModel:x,setCurrentStepObj:_,currentStepObject:N,selectedParts:P,setProperties:k,setCurrentObject:A,visibleObj:T}=s.useContext(V);const[h,M]=s.useState(!1),[z,D]=s.useState(!1),[n,l]=s.useState(o);s.useState();const[a,y]=s.useState(r);s.useState(o),s.useState(),s.useState(),s.useState();const[S,I]=s.useState(),[j,$]=s.useState();s.useState();const U=new ee({color:15461355}),Q=new ee({color:16777215}),J=new ee({color:16711680,wireframe:!0}),Y=new ee({color:13754592});var ve=new le({color:4210752,linewidth:10}),xe=new le({color:6723993,linewidth:50}),ze=new le({color:10921638,linewidth:10});new Ee(rt).uniforms.diffuse.value.set(0);const Ie=[],Z=[["021_Prepare_the_head_front_plate"],["022_Prepare_the_head_back_plate","023_Fix_the_bottom_carriage"],["051_Prepare_pinch_roller","052_Fix_front_shaft","053_Fix_the_spring"],["17_Prepare_Y_motor_holder"],["20_Install_electronics"],["21_Prepare_Side_Cover"]],Le=["22_Wiring_and_cable_management"],be=[];let X=[],W=[];s.useEffect(()=>{E===!0?(l(o),$(o.getObjectByName(h[d]))):E===!1&&(l(u),$(u.getObjectByName(h[d])))},[E]),s.useEffect(()=>{n.traverse(c=>{c.isObject3D&&!c.isMesh&&!c.isGroup&&(de.push(c.name),fe.push(c.userData.name))},[]),de.sort(),M(de),fe.sort(),D(fe),a.traverse(c=>{if(c.isMesh){c.material=U,c.frustumCulled=!1;var g=new ae(c.geometry,20),C=new ce(g,ze);c.add(C),c.geometry.dispose(),U.dispose()}}),_(r.getObjectByName(h[0])),$(n.getObjectByName(h[0])),ye(),H()},[]);const Fe=Ie.some(c=>c.includes(h[d])),De=Z.some(c=>c.includes(h[d]));B(c=>c.wiringStep);const He=B(c=>c.isWiringStep),$e=B(c=>c.isNotWiringStep);Le.some(c=>c.includes(h[d]))?He():$e(),s.useEffect(()=>{_(o.getObjectByName(h[d])),$(n.getObjectByName(h[d]))},[h,d]),s.useEffect(()=>{ye()},[h,d,N]),s.useEffect(()=>{j&&(A(j.getObjectByName(h[d])),P!=[]&&We(),H())},[P,j]);const ye=s.useCallback(()=>{let c=[],g=[];const C=[];if(N){for(let R=0;R<N.children.length;R++)N.children[R].traverse(L=>{L.isGroup&&L.userData.name!=null&&C.push(L.userData.name),c=[...new Set(C)],g=c.map(Ce=>[C.filter(Je=>Je===Ce).length,Ce])});const w=N.userData.name;k({partsNames:g,titleName:w})}}),qe=s.useCallback(()=>{for(let c=d-1;c>=0;c--)for(let g=W.length-1;g>=0;g--)if(h[c]===W[g]){let C=a.getObjectByName(`${h[c]}`,!0);if(X.push(C),h[c+1]==="023_Fix_the_bottom_carriage"){let w=a.getObjectByName("022_Prepare_the_head_back_plate",!0),R=a.getObjectByName("021_Prepare_the_head_front_plate",!0);X.push(w),X.push(R)}}}),Ke=s.useCallback(()=>{for(let C=0;C<Z.length;C++){W=Z[C];for(let w=0;w<W.length;w++)W.some(L=>L.includes(h[d]))&&qe()}let c=new ne,g=j.clone();c.add(g),X.filter(C=>Z.some(w=>w.includes(C.name))).forEach(C=>{C.visible=!0;let w=C.clone();c.add(w)}),x(c)}),Ue=s.useCallback(()=>{for(let w=d-1;w>=0;w--){let R=a.getObjectByName(`${h[w]}`,!0);be.push(R)}let c=[];h[d]==="24_Fix_side_covers"&&(c=["21_Prepare_Side_Cover"],console.log("exception"));let g=new ne;be.filter(w=>!c.some(R=>R.includes(w.name))).forEach(w=>{w.visible=!0;let R=w.clone();g.add(R)});let C=j.clone();g.add(C),x(g)}),We=s.useCallback(()=>{if(j){for(let c=0;c<j.children.length;c++)j.children[c].traverse(g=>{if(g.isMesh&&P.includes(j.children[c].userData.name)){g.frustumCulled=!1,g.geometry.clone(),g.material=Y;var C=new ae(g.geometry,20),w=new ce(C,xe);g.add(w),Y.dispose(),C.dispose(),xe.dispose()}else if(g.isMesh&&j.children[c].userData.name!="Curves"){g.frustumCulled=!1,g.material=Q;var C=new ae(g.geometry,20),R=new ce(C,ve);g.add(R),C.dispose(),ve.dispose()}else if(g.userData.name==="Curves"&&(g.material=J,g.isGroup))for(let L=0;L<g.children.length;L++)g.children[L].isMesh&&(g.children[L].material=J)});I(P)}}),Ge=s.useCallback(()=>{if(j){j.clone();for(let c=0;c<n.children.length;c++)n.children[c].visible=!1;for(let c=0;c<a.children.length;c++)a.children[c].visible=!1;Fe?(console.log("exception"),j.visible=!0,x(j)):De?(console.log("preparing step"),j.visible=!0,Ke()):(console.log("main building step"),j.visible=!0,Ue())}},[j]);s.useEffect(()=>{Ge()},[j]);const{setListOfStep:Qe}=s.useContext(V);return Qe(z),s.useState(null),i.jsx(i.Fragment,{children:i.jsx(mt,{children:h?i.jsxs(i.Fragment,{children:[i.jsx("primitive",{ref:p,object:n,scale:1.0001}),i.jsx("primitive",{ref:v,object:a,scale:1})]}):null})})}const vt=F.memo(gt);function xt(){let e=[],t=new ne;const{modelProperties:r,visibleObj:o,currentStepObject:u,setClickedParts:f,selectedParts:b,partsInOut:m,setCurrentPartsModel:p,currentObject:v,partBtnState:d,setPartButtonState:O}=s.useContext(V),[E,x]=s.useState(null);s.useState(!1);const[_,N]=s.useState(!1),P=B(h=>h.wiringStep),k=s.useCallback(()=>{if(t=new ne,e=[],E){console.log(E);for(let h=0;h<v.children.length;h++)if(v.children[h].userData.name===E){const M=v.children[h].clone();t.add(M),e.push(v.children[h].userData.name)}f(e),p(t)}});s.useEffect(()=>{e=[],f(e),k()},[u,E]),s.useEffect(()=>{O(!1),e=[],f(e),p(null)},[u]);const A=()=>{d===!0&&(O(!1),e=[],f(e),p(null)),d===!1&&(O(!0),k())},T=()=>{console.log("disable"),O(!1),e=[],f(e),p(null),x(null)};return i.jsx(i.Fragment,{children:i.jsx("div",{children:i.jsx("ul",{children:r?r.partsNames.map(([h,M],z)=>i.jsx("li",{children:M===E?i.jsxs("button",{id:`${M}`,style:{backgroundColor:"#669999",color:"#ffffff"},disabled:_,onClick:()=>{d===!0&&T()},className:"parts",children:[i.jsxs("b",{children:[" ",h,"x"]}),"  ",M]}):P?i.jsxs("p",{style:{paddingBottom:10},children:[i.jsxs("b",{children:[" ",h,"x"]}),"  ",M]}):i.jsxs("button",{id:`${M}`,disabled:_,onClick:()=>{x(M),A()},className:"parts",children:[i.jsxs("b",{children:[" ",h,"x "]}),"  ",M]})},z)):null})})})}function bt(){const{modelProperties:e}=s.useContext(V);return i.jsx(i.Fragment,{children:i.jsx("div",{children:e?e.titleName:null})})}function yt(){const{stepList:e,setStepPosition:t,stepCount:r,currentStepName:o,modelProperties:u}=s.useContext(V);s.useState("stepNaviBtn");const[f,b]=s.useState();return e&&[...Array(e.length)],i.jsx("div",{children:i.jsx("ul",{children:e?e.map((m,p)=>i.jsx("li",{children:u&&m===u.titleName?i.jsx("button",{id:`${m}`,style:{backgroundColor:"#000000",color:"#ffffff"},onClick:()=>{t(p)},className:"stepNaviBtn",children:m}):i.jsx("button",{id:`${m}`,style:{backgroundColor:f},onClick:()=>{t(p)},className:"stepNaviBtn",children:m})},p)):null})})}const Ct=F.memo(yt);function St({cameraControlsRef:e}){let{visibleObj:t,modelProperties:r,selectedPartsModel:o,selectedParts:u,currentObject:f,setCamera:b,partBtnState:m,currentStepObject:p}=s.useContext(V);const v=Ne(),d=B(O=>O.cameraPositionTag);s.useEffect(()=>{t?(v.refresh(t).fit().clip(),H()):(v.refresh(p).fit().clip(),H()),H()},[p,d]),s.useEffect(()=>{o?(v.refresh(o).fit(),H()):o||(v.refresh(t).fit(),H())},[o])}let me=1,Te=new Array;new Array;let pe=new Array,te;ge.get("https://sheets.googleapis.com/v4/spreadsheets/1LOopooeNjhdzCfvu5zUAM77Gak6xyd6BK8abQuMvPiA/values/Workbook?key=AIzaSyCqcO7MQv4dsj76ps3nNJnMwTT8Cvqv-eM").then(e=>{let t=e.data.values,r=new Array;for(const o of t)me>2&&o[1]!=""&&(Te.push(r),r=new Array),r.push(o),++me});function wt(){let{stepCount:e}=s.useContext(V);return s.useEffect(()=>{te=new Array;for(const t of Te[e+1])t[10]!=""&&t[10]!=null&&(pe=new Array,pe.push(t[10]),te.push(pe)),++me},[e]),i.jsx(i.Fragment,{children:te?i.jsxs("div",{children:[i.jsxs("div",{id:"RemarksTitle",style:{margin:"auto",display:"inline",alignContent:"baseline"},children:[i.jsx("h3",{children:" Remarks"})," ",i.jsx("br",{})]}),i.jsx("ul",{children:te.map((t,r)=>i.jsxs("li",{children:[" ",t]},r))})]}):null})}/**
  * react-collapsed v4.2.0
  *
  * Copyright (c) 2019-2024, Rogin Farrer
  *
  * This source code is licensed under the MIT license found in the
  * LICENSE.md file in the root directory of this source tree.
  *
  * @license MIT
  */var _t=class extends Error{constructor(e){super(`react-collapsed: ${e}`)}},re=(...e)=>(e[0],`${e[1]}`,void 0);function Me(e){const t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useCallback((...r)=>{var o;return(o=t.current)==null?void 0:o.call(t,...r)},[])}function jt(e,t,r){const[o,u]=s.useState(t),f=s.useRef(typeof e<"u"),b=f.current?e:o,m=Me(r),p=s.useCallback(v=>{const O=typeof v=="function"?v(b):v;f.current||u(O),m==null||m(O)},[m,b]);return s.useEffect(()=>{re(!(f.current&&e==null),"`isExpanded` state is changing from controlled to uncontrolled. useCollapse should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled collapse for the lifetime of the component. Check the `isExpanded` prop."),re(!(!f.current&&e!=null),"`isExpanded` state is changing from uncontrolled to controlled. useCollapse should not switch from uncontrolled to controlled (or vice versa). Decide between using a controlled or uncontrolled collapse for the lifetime of the component. Check the `isExpanded` prop.")},[e]),[b,p]}var At="(prefers-reduced-motion: reduce)";function Pt(){const[e,t]=s.useState(!1);return s.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia!="function")return;const r=window.matchMedia(At);t(r.matches);const o=u=>{t(u.matches)};if(r.addEventListener)return r.addEventListener("change",o),()=>{r.removeEventListener("change",o)};if(r.addListener)return r.addListener(o),()=>{r.removeListener(o)}},[]),e}var Ot=st["useId".toString()]||(()=>{});function kt(){return Ot()??""}var Et=typeof window<"u"?s.useLayoutEffect:s.useEffect,he=!1,Nt=0,we=()=>++Nt;function Tt(e){const t=e||(he?we():null),[r,o]=s.useState(t);return Et(()=>{r===null&&o(we())},[]),s.useEffect(()=>{he===!1&&(he=!0)},[]),r!=null?String(r):void 0}function Mt(e){const t=kt(),r=Tt(e);return typeof e=="string"?e:typeof t=="string"?t:r}function Bt(e,t){const r=performance.now(),o={};function u(){o.id=requestAnimationFrame(f=>{f-r>t?e():u()})}return u(),o}function _e(e){e.id&&cancelAnimationFrame(e.id)}function je(e){return e!=null&&e.current?e.current.scrollHeight:(re(!0,"Was not able to find a ref to the collapse element via `getCollapseProps`. Ensure that the element exposes its `ref` prop. If it exposes the ref prop under a different name (like `innerRef`), use the `refKey` property to change it. Example:\n\nconst collapseProps = getCollapseProps({refKey: 'innerRef'})"),0)}function Rt(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Vt(e,t){if(e!=null)if(typeof e=="function")e(t);else try{e.current=t}catch{throw new _t(`Cannot assign value "${t}" to ref "${e}"`)}}function Ae(...e){return e.every(t=>t==null)?null:t=>{e.forEach(r=>{Vt(r,t)})}}function zt(e){let t=r=>{};t=r=>{if(!(r!=null&&r.current))return;const{paddingTop:o,paddingBottom:u}=window.getComputedStyle(r.current);re(!(o&&o!=="0px"||u&&u!=="0px"),`Padding applied to the collapse element will cause the animation to break and not perform as expected. To fix, apply equivalent padding to the direct descendent of the collapse element. Example:

Before:   <div {...getCollapseProps({style: {padding: 10}})}>{children}</div>

After:   <div {...getCollapseProps()}>
             <div style={{padding: 10}}>
                 {children}
             </div>
          </div>`)},s.useEffect(()=>{t(e)},[e])}var It=typeof window>"u"?s.useEffect:s.useLayoutEffect;function Lt({duration:e,easing:t="cubic-bezier(0.4, 0, 0.2, 1)",onTransitionStateChange:r=()=>{},isExpanded:o,defaultExpanded:u=!1,hasDisabledAnimation:f,id:b,...m}={}){const p=Me(r),v=Mt(b?`${b}`:void 0),[d,O]=jt(o,u),E=s.useRef(d),[x,_]=s.useState(!1),N=Pt(),P=f??N,k=s.useRef(),A=s.useRef(),T=s.useRef(null),[h,M]=s.useState(null);zt(T);const z=`${m.collapsedHeight||0}px`;function D(n){if(!T.current)return;const l=T.current;for(const a in n){const y=n[a];y?l.style[a]=y:l.style.removeProperty(a)}}return It(()=>{if(!T.current||d===E.current)return;E.current=d;function l(S){return P?0:e??Rt(S)}const a=S=>`height ${l(S)}ms ${t}`,y=S=>{function I(){d?(D({height:"",overflow:"",transition:"",display:""}),p("expandEnd")):(D({transition:""}),p("collapseEnd")),_(!1)}A.current&&_e(A.current),A.current=Bt(I,S)};return _(!0),d?k.current=requestAnimationFrame(()=>{p("expandStart"),D({display:"block",overflow:"hidden",height:z}),k.current=requestAnimationFrame(()=>{p("expanding");const S=je(T);y(l(S)),T.current&&(T.current.style.transition=a(S),T.current.style.height=`${S}px`)})}):k.current=requestAnimationFrame(()=>{p("collapseStart");const S=je(T);y(l(S)),D({transition:a(S),height:`${S}px`}),k.current=requestAnimationFrame(()=>{p("collapsing"),D({height:z,overflow:"hidden"})})}),()=>{k.current&&cancelAnimationFrame(k.current),A.current&&_e(A.current)}},[d,z,P,e,t,p]),{isExpanded:d,setExpanded:O,getToggleProps(n){const{disabled:l,onClick:a,refKey:y,...S}={refKey:"ref",onClick(){},disabled:!1,...n},I=h?h.tagName==="BUTTON":void 0,j=n==null?void 0:n[y||"ref"],$={id:`react-collapsed-toggle-${v}`,"aria-controls":`react-collapsed-panel-${v}`,"aria-expanded":d,onClick(J){l||(a==null||a(J),O(Y=>!Y))},[y||"ref"]:Ae(j,M)},U={type:"button",disabled:l?!0:void 0},Q={"aria-disabled":l?!0:void 0,role:"button",tabIndex:l?-1:0};return I===!1?{...$,...Q,...S}:I===!0?{...$,...U,...S}:{...$,...U,...Q,...S}},getCollapseProps(n){const{style:l,refKey:a}={refKey:"ref",style:{},...n},y=n==null?void 0:n[a||"ref"];return{id:`react-collapsed-panel-${v}`,"aria-hidden":!d,"aria-labelledby":`react-collapsed-toggle-${v}`,role:"region",...n,[a||"ref"]:Ae(T,y),style:{boxSizing:"border-box",...!x&&!d?{display:z==="0px"?"none":"block",height:z,overflow:"hidden"}:{},...l}}}}}var Be={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Pe=F.createContext&&F.createContext(Be),Ft=["attr","size","title"];function Dt(e,t){if(e==null)return{};var r=Ht(e,t),o,u;if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(e);for(u=0;u<f.length;u++)o=f[u],!(t.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}function Ht(e,t){if(e==null)return{};var r={};for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){if(t.indexOf(o)>=0)continue;r[o]=e[o]}return r}function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},se.apply(this,arguments)}function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,o)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oe(Object(r),!0).forEach(function(o){$t(e,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(r,o))})}return e}function $t(e,t,r){return t=qt(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qt(e){var t=Kt(e,"string");return typeof t=="symbol"?t:t+""}function Kt(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var o=r.call(e,t||"default");if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Re(e){return e&&e.map((t,r)=>F.createElement(t.tag,ie({key:r},t.attr),Re(t.child)))}function oe(e){return t=>F.createElement(Ut,se({attr:ie({},e.attr)},t),Re(e.child))}function Ut(e){var t=r=>{var{attr:o,size:u,title:f}=e,b=Dt(e,Ft),m=u||r.size||"1em",p;return r.className&&(p=r.className),e.className&&(p=(p?p+" ":"")+e.className),F.createElement("svg",se({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,o,b,{className:p,style:ie(ie({color:e.color||r.color},r.style),e.style),height:m,width:m,xmlns:"http://www.w3.org/2000/svg"}),f&&F.createElement("title",null,f),e.children)};return Pe!==void 0?F.createElement(Pe.Consumer,null,r=>t(r)):t(Be)}function ke(e){return oe({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"},child:[]},{tag:"path",attr:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0 1 30.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1 0 80 0 40 40 0 1 0-80 0z"},child:[]}]})(e)}function Wt(e){return oe({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m18.25 7.6-5.5-3.18a1.49 1.49 0 0 0-1.5 0L5.75 7.6c-.46.27-.75.76-.75 1.3v6.35c0 .54.29 1.03.75 1.3l5.5 3.18c.46.27 1.04.27 1.5 0l5.5-3.18c.46-.27.75-.76.75-1.3V8.9c0-.54-.29-1.03-.75-1.3zM7 14.96v-4.62l4 2.32v4.61l-4-2.31zm5-4.03L8 8.61l4-2.31 4 2.31-4 2.32zm1 6.34v-4.61l4-2.32v4.62l-4 2.31zM7 2H3.5C2.67 2 2 2.67 2 3.5V7h2V4h3V2zm10 0h3.5c.83 0 1.5.67 1.5 1.5V7h-2V4h-3V2zM7 22H3.5c-.83 0-1.5-.67-1.5-1.5V17h2v3h3v2zm10 0h3.5c.83 0 1.5-.67 1.5-1.5V17h-2v3h-3v2z"},child:[]}]})(e)}function Gt(e){return oe({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14l-6-6z"},child:[]}]})(e)}function Qt(e){return oe({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M24 24H0V0h24v24z",opacity:".87"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6-1.41-1.41z"},child:[]}]})(e)}let G=1,Ve=new Array,q=new Array;ge.get("https://sheets.googleapis.com/v4/spreadsheets/1LOopooeNjhdzCfvu5zUAM77Gak6xyd6BK8abQuMvPiA/values/Workbook?key=AIzaSyCqcO7MQv4dsj76ps3nNJnMwTT8Cvqv-eM").then(e=>{let t=e.data.values,r=new Array;for(const o of t)G>2&&o[1]!=""&&(Ve.push(r),r=new Array),r.push(o),++G});function Jt(){const[e,t]=s.useState(),[r,o]=s.useState(),[u,f]=s.useState(),b=B(x=>x.isNotVisibleToggle),m=B(x=>x.isVisibleToggle);B(x=>x.isVisible);let{stepCount:p,howToData:v,setHowToWorkbook:d,setClickedPath:O,path:E}=s.useContext(V);return s.useEffect(()=>{let x=new Array;ge.get("https://sheets.googleapis.com/v4/spreadsheets/1grTucZ2sqLgZ4AtJq8EkyO__kLg-pazRVl3sbLNMaIY/values/Blad1?key=AIzaSyCqcO7MQv4dsj76ps3nNJnMwTT8Cvqv-eM").then(_=>{let N=_.data.values,P=new Array,k=[];for(const A of N)G>0&&A[0]!=""?(P=new Array,P.push(A),x.push(P)):P.push(A),++G;d(x);for(const A of x)A[0]!=""&&(q=new Array,q.push(A[0][0],A[0][1]),k.push(q));f(k)})},[]),s.useEffect(()=>{let x=new Array;for(const _ of Ve[p+1])_[12]!=""&&_[12]!=null&&(q=new Array,q.push(_[12]),x.push(q)),++G;t(x)},[p]),s.useEffect(()=>{let x=[];if(u!=null){for(const _ of e)for(const N of u)N.includes(`${_}`)&&x.push(N);o(x),e.length===0?b():m()}},[u,e]),i.jsx(i.Fragment,{children:i.jsx("div",{children:i.jsx("ul",{children:r?r.map((x,_)=>i.jsxs("li",{children:[i.jsx(it,{to:`/HowTo/${x[0]}`,target:"_blank",rel:"noopener noreferrer",children:i.jsxs("button",{type:"button",className:"stepNaviBtn",children:[x[0],". ",x[1]]})})," "]},_)):null})})})}function Yt(){const e=s.useRef(),[t,r]=s.useState(!1),{getCollapseProps:o,getToggleProps:u}=Lt({isExpanded:t}),f=B(b=>b.isVisible);return i.jsxs(i.Fragment,{children:[i.jsx("button",{type:"button",...u({onClick:()=>r(b=>!b)}),className:t?"expanded":"btn",style:{position:"absolute",top:"20px",left:"20px",visibility:`${f}`},children:t?i.jsxs(i.Fragment,{children:[i.jsx(ke,{})," How To ",i.jsx(Gt,{})]}):i.jsxs(i.Fragment,{children:[i.jsx(ke,{})," How To ",i.jsx(Qt,{})]})}),i.jsx("div",{ref:e,className:"howToBoxContent",...o(),children:i.jsx(Jt,{})})]})}function Zt(){let{visibleObj:e,selectedParts:t,stepSVG:r}=s.useContext(V);const o=B(d=>d.cameraPositionTag),u=B(d=>d.freeControls),f=B(d=>d.wiringStep),b=Ne(),[m]=s.useState(()=>new ue),[p]=s.useState(()=>new ue),v=new ue(4,1,8);return ot((d,O)=>{o==="initial"&&f===!1&&(m.lerp(v,.1),p.lerp([0,0,0],.1),d.camera.position.copy(m),d.camera.lookAt(p),u(),b.refresh(e).fit(),H()),o==="initial"&&f===!0&&(console.log(r),r.reset(),u(),H())}),i.jsx(i.Fragment,{})}function rn(){const e=K("./OLSK_Vinyl_Cutter_V3_IN.glb"),t=K("./OLSK_Vinyl_Cutter_V3_OUT.glb"),r=s.useMemo(()=>e.scene.clone(),[e]),o=s.useMemo(()=>e.scene.clone(),[e]),u=s.useMemo(()=>t.scene.clone(),[t]);s.useState(!1),s.useRef(),s.useRef(),K.clear("./OLSK_Vinyl_Cutter_V3_IN.glb"),K.clear("./OLSK_Vinyl_Cutter_V3_OUT.glb");const f=B(b=>b.resetCamera);return i.jsx(i.Fragment,{children:i.jsxs(s.Fragment,{children:[i.jsx("aside",{className:"stepNavi",children:i.jsx(Ct,{})}),i.jsxs("section",{id:"currentStepArea",children:[i.jsxs("nav",{className:"currentStepBar",children:[i.jsx("h2",{id:"stepTitleArea",children:i.jsx(bt,{})}),i.jsxs("div",{id:"stepControl",children:[i.jsx(dt,{}),"                        "]})]}),i.jsxs("div",{className:"infoColumn",children:[i.jsx("div",{className:"stepPartsArea",children:i.jsx(xt,{})}),i.jsx("div",{className:"stepRemarksArea",children:i.jsx(wt,{})})]}),i.jsxs("article",{className:"viewArea",id:"viewArea",children:[i.jsx(s.Suspense,{fallback:null,children:i.jsxs(lt,{linear:!0,flat:!0,frameloop:"demand",camera:{fov:45,near:1e-4,far:10,position:[4,1,8]},children:[i.jsx(Xt,{}),i.jsx("color",{args:["#f5f5f5"],attach:"background"}),i.jsx(at,{clip:!0,observe:!0,damping:2,margin:.85,children:i.jsxs(s.Suspense,{fallback:null,children:[i.jsx(vt,{modelIn:e,modelOut:t,modelInCopy:r,modelInCopy2:o,modelOutCopy:u}),i.jsx(St,{})]})}),i.jsx(Zt,{})]})}),i.jsx(ut,{}),i.jsxs("button",{className:"btn",style:{position:"absolute",bottom:"20px",left:"20px"},onClick:f,children:[i.jsx(Wt,{})," Reset Camera"]}),i.jsx(ft,{}),i.jsx(Yt,{})]})]})]})})}K.preload("./OLSK_Vinyl_Cutter_V3_IN.glb");K.preload("./OLSK_Vinyl_Cutter_V3_OUT.glb");function Xt(){const e=s.useRef();return i.jsx(i.Fragment,{children:i.jsx(ct,{ref:e,makeDefault:!0,enableDamping:!1,enableRotate:!0,minAzimuthAngle:1/0,maxAzimuthAngle:1/0,minPolarAngle:0,maxPolarAngle:1/0})})}export{rn as default};
//# sourceMappingURL=App-0db758dd.js.map
